{"root":{"data":{"id":"d213sn8voco0","created":1718506734915,"text":"neutron"},"children":[{"data":{"id":"d213tiu10m00","created":1718506803674,"text":"controller node"},"children":[{"data":{"id":"d213u8t9fq80","created":1718506860224,"text":"Prerequisites"},"children":[{"data":{"id":"d213ujjzmyg0","created":1718506883608,"text":"mysql"},"children":[{"data":{"id":"d213ummifeo0","created":1718506890291,"text":"neutron"},"children":[]}]},{"data":{"id":"d213uvj9fso0","created":1718506909685,"text":"openstack"},"children":[{"data":{"id":"d213uycrhnk0","created":1718506915823,"text":"user"},"children":[{"data":{"id":"d213v0dsw1c0","created":1718506920239,"text":"neutron"},"children":[]}]},{"data":{"id":"d213vervzwg0","created":1718506951566,"text":"service"},"children":[{"data":{"id":"d213vj36uug0","created":1718506960956,"text":"neutron/type:network"},"children":[]}]},{"data":{"id":"d213vh1rhwo0","created":1718506956517,"text":"endpoint"},"children":[{"data":{"id":"d213xaf8ats0","created":1718507098822,"text":"neutron/type:network"},"children":[]}]}]}]},{"data":{"id":"d213xxqksj40","created":1718507149574,"text":"Configure networking options1","expandState":"expand"},"children":[{"data":{"id":"d213y8wu2zk0","created":1718507173897,"text":"Install the components","note":"apt install neutron-server neutron-plugin-ml2 \\\n  neutron-linuxbridge-agent neutron-dhcp-agent \\\n  neutron-metadata-agent"},"children":[{"data":{"id":"d21bb9zt2go0","created":1718527942757,"text":"option2","note":"apt install neutron-l3-agent"},"children":[]}]},{"data":{"id":"d213z9pnsm80","created":1718507254004,"text":"Configure the server component","note":"/etc/neutron/neutron.conf"},"children":[{"data":{"id":"d213zsvnsio0","created":1718507295726,"text":"DB","note":"[database]\n# ...\nconnection = mysql+pymysql://neutron:NEUTRON_DBPASS@controller/neutron\n\nlab:\n\n[database]\n# connection = sqlite:////var/lib/neutron/neutron.sqlite\nconnection = mysql+pymysql://neutron:cisco123@controller/neutron\n"},"children":[]},{"data":{"id":"d21406zlxsw0","created":1718507326439,"text":" ML2","note":"[DEFAULT]\n# ...\ncore_plugin = ml2\nservice_plugins ="},"children":[{"data":{"id":"d21bc07lt940","created":1718527999825,"text":"option2","note":"[DEFAULT]\n# ...\n~~core_plugin = ml2~~\nservice_plugins = router\nallow_overlapping_ips = true"},"children":[]}]},{"data":{"id":"d21413p2vc00","created":1718507397636,"text":"MQ ","note":"# ...\ntransport_url = rabbit://openstack:RABBIT_PASS@controller"},"children":[]},{"data":{"id":"d2142bd3n140","created":1718507492691,"text":"keystone","note":"[DEFAULT]\n# ...\nauth_strategy = keystone\n\n[keystone_authtoken]\n# ...\nwww_authenticate_uri = http://controller:5000\nauth_url = http://controller:5000\nmemcached_servers = controller:11211\nauth_type = password\nproject_domain_name = default\nuser_domain_name = default\nproject_name = service\nusername = neutron\npassword = NEUTRON_PASS"},"children":[]},{"data":{"id":"d2143fkh49s0","created":1718507580208,"text":"Nova","note":"[DEFAULT]\n# ...\nnotify_nova_on_port_status_changes = true\nnotify_nova_on_port_data_changes = true\n\n[nova]\n# ...\nauth_url = http://controller:5000\nauth_type = password\nproject_domain_name = default\nuser_domain_name = default\nregion_name = RegionOne\nproject_name = service\nusername = nova\npassword = NOVA_PASS"},"children":[]},{"data":{"id":"d21440tjek80","created":1718507626468,"text":"OSLO","note":"[oslo_concurrency]\n# ...\nlock_path = /var/lib/neutron/tmp"},"children":[]}]},{"data":{"id":"d2145hdbq000","created":1718507740857,"text":"Configure the Modular Layer 2 (ML2) plug-in","note":"/etc/neutron/plugins/ml2/ml2_conf.ini"},"children":[{"data":{"id":"d2146mip9og0","created":1718507830430,"text":"type_drivers","note":"[ml2]\n# ...\ntype_drivers = flat,vlan"},"children":[{"data":{"id":"d21bczwzshs0","created":1718528077547,"text":"option2","note":"[ml2]\n# ...\ntype_drivers = flat,vlan,vxlan"},"children":[]}]},{"data":{"id":"d2147in7bns0","created":1718507900360,"text":"tenant_network_types","note":"[ml2]\n# ...\ntenant_network_types ="},"children":[{"data":{"id":"d21bd9shgpc0","created":1718528099042,"text":"option2","note":"[ml2]\n# ...\ntenant_network_types = vxlan"},"children":[]}]},{"data":{"id":"d2147wzknc00","created":1718507931583,"text":"mechanism_drivers","note":"[ml2]\n# ...\nmechanism_drivers = linuxbridge"},"children":[{"data":{"id":"d21bdmz19000","created":1718528127737,"text":"option2","note":"[ml2]\n# ...\nmechanism_drivers = linuxbridge,l2population"},"children":[]}]},{"data":{"id":"d2148iclm8o0","created":1718507978083,"text":"extension_drivers","note":"[ml2]\n# ...\nextension_drivers = port_security"},"children":[]},{"data":{"id":"d215leyxcio0","created":1718511810570,"text":"ml2_type_flat","note":"[ml2_type_flat]\n# ...\nflat_networks = provider"},"children":[]},{"data":{"id":"d215lv98pbc0","created":1718511846022,"text":"security group","note":"[securitygroup]\n# ...\nenable_ipset = true"},"children":[]},{"data":{"id":"d21be1pjne00","created":1718528159814,"text":"option2","priority":2},"children":[{"data":{"id":"d21be5o7pu00","created":1718528168441,"text":"ml2_type_vxlan","note":"[ml2_type_vxlan]\n# ...\nvni_ranges = 1:1000"},"children":[]}]}]},{"data":{"id":"d215mpjf78w0","created":1718511911941,"text":"Configure the Linux bridge agent","note":"/etc/neutron/plugins/ml2/linuxbridge_agent.ini"},"children":[{"data":{"id":"d215nc4chnc0","created":1718511961095,"text":"linux bridge","note":"[linux_bridge]\nphysical_interface_mappings = provider:PROVIDER_INTERFACE_NAME"},"children":[]},{"data":{"id":"d215no73myo0","created":1718511987383,"text":"vxlan","note":"[vxlan]\nenable_vxlan = false"},"children":[]},{"data":{"id":"d215nxt9r8w0","created":1718512008315,"text":"security group","note":"[securitygroup]\n# ...\nenable_security_group = true\nfirewall_driver = neutron.agent.linux.iptables_firewall.IptablesFirewallDriver"},"children":[]},{"data":{"id":"d215p62rgy00","created":1718512104667,"text":"filter","note":"net.bridge.bridge-nf-call-iptables\nnet.bridge.bridge-nf-call-ip6tables"},"children":[]}]},{"data":{"id":"d215pwjuxo80","created":1718512162297,"text":"Configure the DHCP agent","note":"/etc/neutron/dhcp_agent.ini\n\n\n[DEFAULT]\n# ...\ninterface_driver = linuxbridge\ndhcp_driver = neutron.agent.linux.dhcp.Dnsmasq\nenable_isolated_metadata = true"},"children":[]},{"data":{"id":"d21bfihjpg80","created":1718528274700,"text":"option2","priority":2},"children":[{"data":{"id":"d21bfqo4kw80","created":1718528292512,"text":"L3_agent","note":"/etc/neutron/l3_agent.ini\n\n[DEFAULT]\n# ...\ninterface_driver = linuxbridge"},"children":[]}]}]},{"data":{"id":"d215v1efy5s0","created":1718512564674,"text":"Configure the metadata agent","note":"/etc/neutron/metadata_agent.ini"},"children":[{"data":{"id":"d215vaj84m00","created":1718512584555,"text":"metadata host ","note":"[DEFAULT]\n# ...\nnova_metadata_host = controller\nmetadata_proxy_shared_secret = METADATA_SECRET"},"children":[]}]},{"data":{"id":"d215vzc616o0","created":1718512638548,"text":"Configure the Compute service to use the Networking service","note":"/etc/nova/nova.conf\n\nnova compute service所在的节点"},"children":[{"data":{"id":"d215wllbun40","created":1718512686991,"text":"neutron","note":"[neutron]\n# ...\nauth_url = http://controller:5000\nauth_type = password\nproject_domain_name = default\nuser_domain_name = default\nregion_name = RegionOne\nproject_name = service\nusername = neutron\npassword = NEUTRON_PASS\nservice_metadata_proxy = true\nmetadata_proxy_shared_secret = METADATA_SECRET"},"children":[]}]},{"data":{"id":"d215xgfbopk0","created":1718512754108,"text":"Finalize installation"},"children":[{"data":{"id":"d215xn1cieg0","created":1718512768500,"text":"Populate the database","note":"# su -s /bin/sh -c \"neutron-db-manage --config-file /etc/neutron/neutron.conf \\\n  --config-file /etc/neutron/plugins/ml2/ml2_conf.ini upgrade head\" neutron"},"children":[]},{"data":{"id":"d215xuou5tk0","created":1718512785158,"text":"computer api service重启","note":"# service nova-api restart"},"children":[]},{"data":{"id":"d215y53o2540","created":1718512807823,"text":"networking service重启","note":"# service neutron-server restart\n# service neutron-linuxbridge-agent restart\n# service neutron-dhcp-agent restart\n# service neutron-metadata-agent restart\n\noption2:\n# service neutron-l3-agent restart"},"children":[]}]}]},{"data":{"id":"d2161nq9vmw0","created":1718513083464,"text":"compute node"},"children":[{"data":{"id":"d21628smxjs0","created":1718513129319,"text":"Install the components","note":"# apt install neutron-linuxbridge-agent"},"children":[]},{"data":{"id":"d2162k2d62o0","created":1718513153852,"text":"Configure the common component"},"children":[{"data":{"id":"d2162vnz65c0","created":1718513179104,"text":"neutron.conf"},"children":[{"data":{"id":"d213zsvnsio0","created":1718507295726,"text":"DB","note":"不连接"},"children":[]},{"data":{"id":"d21413p2vc00","created":1718507397636,"text":"MQ ","note":"# ...\ntransport_url = rabbit://openstack:RABBIT_PASS@controller"},"children":[]},{"data":{"id":"d2142bd3n140","created":1718507492691,"text":"keystone","note":"[DEFAULT]\n# ...\nauth_strategy = keystone\n\n[keystone_authtoken]\n# ...\nwww_authenticate_uri = http://controller:5000\nauth_url = http://controller:5000\nmemcached_servers = controller:11211\nauth_type = password\nproject_domain_name = default\nuser_domain_name = default\nproject_name = service\nusername = neutron\npassword = NEUTRON_PASS"},"children":[]},{"data":{"id":"d21440tjek80","created":1718507626468,"text":"OSLO","note":"[oslo_concurrency]\n# ...\nlock_path = /var/lib/neutron/tmp"},"children":[]}]}]},{"data":{"id":"d21666zkts00","created":1718513438842,"text":"Configure networking options"},"children":[{"data":{"id":"d218bauayoo0","created":1718519481271,"text":"Configure the Linux bridge agent","note":"/etc/neutron/plugins/ml2/linuxbridge_agent.ini"},"children":[{"data":{"id":"d215nc4chnc0","created":1718511961095,"text":"linux bridge","note":"[linux_bridge]\nphysical_interface_mappings = provider:PROVIDER_INTERFACE_NAME"},"children":[]},{"data":{"id":"d215no73myo0","created":1718511987383,"text":"vxlan","note":"[vxlan]\nenable_vxlan = false"},"children":[]},{"data":{"id":"d215nxt9r8w0","created":1718512008315,"text":"security group","note":"[securitygroup]\n# ...\nenable_security_group = true\nfirewall_driver = neutron.agent.linux.iptables_firewall.IptablesFirewallDriver"},"children":[]},{"data":{"id":"d215p62rgy00","created":1718512104667,"text":"filter","note":"net.bridge.bridge-nf-call-iptables\nnet.bridge.bridge-nf-call-ip6tables"},"children":[]}]}]},{"data":{"id":"d215vzc616o0","created":1718512638548,"text":"Configure the Compute service to use the Networking service","note":"/etc/nova/nova.conf\n\nnova compute service所在的节点"},"children":[{"data":{"id":"d215wllbun40","created":1718512686991,"text":"neutron","note":"[neutron]\n# ...\nauth_url = http://controller:5000\nauth_type = password\nproject_domain_name = default\nuser_domain_name = default\nregion_name = RegionOne\nproject_name = service\nusername = neutron\npassword = NEUTRON_PASS\n\n（delete)\n~~service_metadata_proxy = true\nmetadata_proxy_shared_secret = METADATA_SECRET~~\n\ntest"},"children":[]}]},{"data":{"id":"d215xgfbopk0","created":1718512754108,"text":"Finalize installation"},"children":[{"data":{"id":"d215xuou5tk0","created":1718512785158,"text":"computer service重启","note":"# service nova-compute restart\n\n(delete)\n~~# service nova-api restart"},"children":[]},{"data":{"id":"d215y53o2540","created":1718512807823,"text":"linux bridge agent","note":"# service neutron-linuxbridge-agent restart"},"children":[]}]}]}]},"template":"right","theme":"fresh-blue","version":"1.4.43"}